<div *ngIf="auth.loggedIn">

    <header class="text-secondary" style="background-image: url('../assets/computer2.jpg'); background-size: 100%; ">
        <div class="container text-center" style="color:#6c757d">
            <h1>Scam Protector</h1>
        </div>
    </header>

    <!-- <section>
        <div class="container text-center" style="color:#6c757d">
            <button mat-raised-button color="warn" (click)="_getVtuList()">Get list of accounts</button>
        </div>
    </section> -->

    <app-loading *ngIf="loading"></app-loading>

    <ng-template [ngIf]="utils.isLoaded(loading)">

        <section class="text-center">
            <div *ngIf="authorized; then proData else login"></div>
            <ng-template #login>
                <button mat-raised-button color="warn" (click)="signInWithGoogle()">Authenticate New Email</button>
            </ng-template>

            <ng-template #proData>
                <p *ngIf="result" class="alert alert-success text-center">
                    Authenticated and added {{user.email}}!
                </p>
                <p *ngIf="addVtuErrorFlag" class="alert alert-danger text-center">
                    Failed to add {{user.email}}. Please try again.
                </p>
            </ng-template>
        </section>

        <section>
            <h2 class="text-center">{{accountsTitle}}</h2>
        </section>

        <ng-template [ngIf]="vtuList">
            <ng-template [ngIf]="vtuList.length">

                <!-- Vtus listing -->
                <section class="list-group">
                    <a *ngFor="let vtu of vtuList" class="list-group-item flex-column align-items-start">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1 text-center">
                                <!-- <span ng-repeat="flagged in vtuFlaggedList | filter:vtu">
                                    <img src="../assets/warning.png" height="30" width="30">
                                </span> -->
                                {{vtu.vtu_email}}
                            </h5>
                        </div>
                    </a>
                </section>
            </ng-template>

            <section>
                <!-- No vtus available -->
                <p *ngIf="!vtuList.length" class="alert alert-info text-center">
                    No accounts have been added.
                </p>
            </section>
        </ng-template>

        <section>
            <h2 class="text-center">{{flaggedAccountsTitle}}</h2>
        </section>

        <ng-template [ngIf]="vtuFlaggedList">
            <ng-template [ngIf]="vtuFlaggedList.length">

                <!-- Flagged Vtus listing -->
                <section class="list-group">
                    <a *ngFor="let vtuFlagged of vtuFlaggedList" class="list-group-item flex-column align-items-start">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">{{vtuFlagged.vtu_email}}</h5>
                        </div>
                    </a>
                </section>
            </ng-template>

            <section>
                <!-- No flagged vtus available -->
                <p *ngIf="!vtuFlaggedList.length" class="alert alert-info text-center">
                    No accounts have been flagged.
                </p>
            </section>
        </ng-template>

        <section>
            <!-- Error adding caretaker to DB -->
            <p *ngIf="addCaretakerErrorFlag" class="alert alert-danger text-center">
                <strong>Oops!</strong> We tried to add you to our system, but something went wrong.
            </p>

            <!-- Error getting VTUs from DB -->
            <p *ngIf="getVtusErrorFlag" class="alert alert-danger text-center">
                <strong>Oops!</strong> We tried to get your accounts, but something went wrong.
            </p>

            <!-- Error getting flagged VTUs from DB -->
            <p *ngIf="getFlaggedErrorFlag" class="alert alert-danger text-center">
                <strong>Oops!</strong> We tried to get the list of flagged accounts, but something went wrong.
            </p>
        </section>

    </ng-template>

</div>